# yarn zero install

Zero-Install은 **Yarn 2 (Berry)**에서 제공하는 기능으로, 프로젝트의 의존성을 프로젝트 폴더에 직접 포함하여, 의존성을 설치하지 않고도 개발 및 빌드가 가능한 환경을 제공한다.

## Zero-Install Yarn의 작동 원리

- node_modules 폴더를 없앰: 대신 Yarn은 .yarn/cache 디렉토리에 의존성을 압축된 형태로 저장한다.
- yarn.lock 파일과 캐시 디렉토리로 관리: 이 파일과 디렉토리는 프로젝트의 소스 코드와 함께 버전 관리(Git)에 포함된다.
- 직접 실행: 소스 코드와 함께 의존성이 포함되어 있으므로, 새로 클론한 프로젝트에서 별도의 의존성 설치가 필요하지 않는다. 단순히 yarn 명령어를 실행하면 바로 작업 가능하다.

## NPM에서 Zero-Install을 제공하지 않는 이유

### 철학적 차이

NPM은 기본적으로 node_modules를 사용하여 의존성을 관리한다. node_modules는 Git에 커밋하지 않는 것이 표준 관행이며, 이는 프로젝트의 크기를 줄이고 협업 환경에서의 효율성을 높이는 데 목적이 있다.  
Zero-Install은 .yarn/cache 파일을 포함하여 프로젝트 크기를 증가시킬 수 있으므로, NPM 철학과는 다소 차이가 있다.

### 기술적 우선순위

NPM은 대중성을 유지하면서 backward compatibility를 중시한다.  
Yarn의 Zero-Install은 더 혁신적이지만, 이를 구현하려면 기존의 node_modules 방식에서 벗어나야 하며, 이는 많은 프로젝트와의 호환성 문제를 해결해야한다.

### 대안 제공

NPM은 대신 package-lock.json과 캐시 디렉토리를 통해 의존성 일관성을 유지할 수는 있다.  
하지만 Zero-Install처럼 Git에 포함되면 용량이 너무 크므로 추천되지는 않는다.

## Zero-Install로 배포 속도가 빨라지는 이유

### 의존성 설치 제거

일반적으로 프로젝트를 클론한 후 npm install 또는 yarn install 명령어로 의존성을 다운로드하고 설치하는 데 시간이 걸린다.  
하지만, Zero-Install에서는 프로젝트 폴더에 이미 의존성이 포함되어 있으므로 별도의 설치 과정이 필요하지 않는다는 차이점이 있다.

### 캐시 사용

Yarn은 .yarn/cache 디렉토리에 의존성을 압축된 형태로 저장하므로, 의존성을 빠르게 로드할 수 있다.  
따라서 install하는 네트워크 요청 없이 즉시 로드 가능하여 속도를 극대화한다.

### 배포 환경 간 일관성

Git으로 관리되는 의존성 덕분에, 개발 환경과 CI/CD 환경에서 동일한 버전과 구성을 보장할 수 있다.  
따라서 불필요한 디버깅이나 설치 실패를 방지한다.

## zero install 단점

### github 저장소 크기 증가

.yarn/cache 디렉토리와 같은 압축된 의존성이 Git에 포함되므로, 저장소의 크기가 크게 증가할 수 있다.  
의존성이 많은 프로젝트에서는 Git 클론 속도가 느려진다.

### 협업 복잡성

팀에서 사용하는 패키지 매니저가 다양할 경우(예: 일부는 NPM, 일부는 Yarn 사용), Zero-Install 방식은 호환성 문제를 야기할 수 있다.

### 의존성 관리 복잡성

.yarn/cache 디렉토리가 Git에 커밋되기 때문에, 의존성 변경 시 Git 충돌이 발생할 가능성이 높아진다.

### Yarn에 종속적

Zero-Install은 Yarn에서만 사용 가능하므로, 다른 패키지 매니저로 전환하기가 어렵다.

## Yarn으로 전환해야 하는 이유

- 배포 속도: Zero-Install과 더 빠른 의존성 설치 속도로 CI/CD 파이프라인의 효율성을 극대화할 수 있다.
- 일관성: 의존성 관리와 배포 환경의 일관성을 유지할 수 있다.
- 대규모 프로젝트 적합: Workspaces와 Monorepo 구조 지원으로 대규모 프로젝트에서 유리하다.
- 미래지향적: Yarn 2의 Plug'n'Play는 기존 node_modules 방식의 단점을 해결하며, 더 나은 디스크 사용량과 성능을 제공한다.
- Yarn은 특히 대규모 팀 환경이나 빠른 배포가 필요한 프로젝트에서 NPM보다 많은 이점을 제공한다. Zero-Install은 이러한 Yarn의 강점을 더욱 돋보이게 하는 기능 중 하나이다.
